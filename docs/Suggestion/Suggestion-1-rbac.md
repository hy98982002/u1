### 1. **Marketing \_Rules 与 PRD \_Membership\_Module 的要点是否已并入《UAI Unified PRD v5.0》？**

| 主题                | 独立文档中的关键点                           | 在 PRD v5.0 中的位置                     | 评估             |
| ----------------- | ----------------------------------- | ----------------------------------- | -------------- |
| **优惠券类型与二选一不可叠加** | 7 折券、就业班折扣券、积分兑换券；7 折券与积分券二选一，不可叠加  | 6.2.2 优惠券策略系统表格已完整呈现                | **已并入**        |
| **积分签到与防套利规则**    | 每日 10 分、年底清零，首月兑换上限等                | 积分系统设计对象已映射相同逻辑                     | **已并入**        |
| **会员定价与权益**       | 月/季/年/长期价位及对应券包                     | 3.2.1 全球化差异定价表＋权益列                  | **已并入（定价更细化）** |
| **购买即视为使用、退费折旧**  | 不适用 7 日无理由；5 年折旧                    | **未找到等价条款**（PRD v5.0 暂缺专门“退费/法务”段落） | **缺失**         |

> **结论:** PRD v5.0 已吸收大部分营销与会员规则（券、积分、定价、权益等）；“退费合规”条款尚未迁入，需新增。

---

### 2. **RBAC（角色-权限）是否需要写入 PRD？**

* **必要性**

  * 你的网站同时面向 **访客 → 注册用户 → 付费会员 → Staff → Admin/SuperAdmin** 多层角色；而优惠券、课程访问、订单管理等功能均依赖精确权限控制。
  * Django + DRF 天然支持基于 `Group + Permission` 或 JWT Claim 的 RBAC；PRD 中若缺乏清晰角色矩阵，后期 API、前端路由守卫与审计日志都会反复返工。

* **当前 PRD 现状**

  * 仅在 6.2 会员权益与付费逻辑中隐含“会员 vs. 非会员”两级差异；**未出现**系统级角色、资源、动作、授权流程的定义。

* **建议写入内容**

  | 维度        | 关键要素                                                                        |
  | --------- | --------------------------------------------------------------------------- |
  | **角色**    | guest、user、vipMember、staffEditor、opsAnalyst、admin                           |
  | **资源范围**  | 课程、订单、优惠券、数据面板、系统设置等                                                        |
  | **动作**    | read / create / update / delete / export / approve                          |
  | **授权模型**  | Django `Permission` + `Group`；前端通过 Pinia Store 注入 JWT Claim；路由 meta + 按钮级鉴权 |
  | **继承/变更** | 会员到期自动降级；Staff 离职自动撤权；Admin 仅由 SSO/LDAP 赋权                                  |
  | **审计**    | 所有敏感动作写入 `audit_log` 表；7 年留存，支持 GA4 事件同步                                    |

---

### 3. **现有 PRD 的整体评测（优 & 待补）**

| 维度          | 优势                                             | 主要缺口                                              |
| ----------- | ---------------------------------------------- | ------------------------------------------------- |
| **业务设计**    | 课程分层、会员定价、双引擎 SEO+AEO 逻辑齐全；优惠券 & 积分防套利策略落地     | **退费条款缺失；RBAC 未定义；客服/售后流程未描述**                    |
| **技术栈与全球化** | Vue 3 + Vite + Bootstrap 5.3；大陆/海外支付与 CDN 适配详尽 | 缺少 **API 合同 & ER 图**；**性能/容量 KPI**（QPS、并发、RPS）未量化 |
| **数据与监控**   | 指标体系覆盖获客-留存-收入闭环                               | 日志、APM、备份策略写得零散；缺跨区灾备 RTO/RPO                     |
| **合规与安全**   | 已列 GDPR & 中国数安法清单                              | 没有 **OWASP Top 10** 威胁评估；CSRF/CORS 只提到配置，未给风险应对   |
| **可维护性**    | 更新日志 & 版本溯源齐全                                  | 缺**回滚方案**、灰度发布流程、A/B 测试规范                         |

---

### 4. **建议新增或细化的条目**

1. **RBAC 权限矩阵**（详见第 2 节建议）。
2. **退款 / 客诉处理**：加入“购买即视为使用”与 5 年折旧退费逻辑，并明确法务与客服触发点。
3. **系统架构 & 数据模型**

   * 高可用拓扑图（Sealos+Railway 主从 / 读写分离）
   * MySQL 8.4.5 主要表结构（课程、订单、券、积分、权限）
4. **API 规范**

   * RESTful + JWT；错误码（4xx / 5xx）统一枚举；接口节流策略。
5. **性能与容量目标**

   * 峰值并发、P95 延迟、海外 CDN TTFB、作业批量评分耗时等硬指标。
6. **DevOps & 监控**

   * CI/CD 阶段质量闸口（单测覆盖率 ≥ 80%；Sonar 阈值）；
   * APM 指标告警 & 灾备（RTO ≤ 30 min，RPO ≤ 15 min）。
7. **灰度 / A/B / Feature Flag**：营销活动券、定价实验、UI 迭代均需可灰度上线。
8. **无障碍与 i18n fallback**：OpenCC.js 自动切换繁体、ARIA 标签覆盖率。
9. **内容安全**：UGC 评论、AI 生成内容的审核流程；水印 & 防盗录策略对接阿里 VOD。

---

## In short（中文小结）

当前 **PRD v5.0** 已完整移植了优惠券、积分、会员定价等营销与会员规则，但仍缺“退费合规条款”、“RBAC 权限矩阵”等安全与运维细节。建议补写 RBAC、退款流程、API-ER 图、性能指标与 DevOps 灰度规范，使文档从“业务可行”升级为“可交付落地”。
