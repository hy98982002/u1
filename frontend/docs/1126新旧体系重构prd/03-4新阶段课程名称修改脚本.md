### 1  为什么最好 **提前统一文件名** ？

| 场景            | 提前改名的好处                                  | 若延后再改的隐患                   |
| ------------- | ---------------------------------------- | -------------------------- |
| **代码引用**      | 组件、JSON-LD、CMS 只需写一次规律化路径，免去后期 refactor。 | 散落的硬编码路径难以全局搜换，容易漏掉。       |
| **SEO / CDN** | 规范 slug 与图片名一致，利于图片搜索与缓存命中。              | 发布后再改名会触发 404 / 重新爬取，浪费带宽。 |
| **自动脚本**      | 脚本可用简单正则批量生成 `srcset`、预加载、占位图。           | 命名不一致导致脚本难以匹配。             |

> **结论**：**上线前一次性改好** 最省心，后续版本只需新增同规则文件。

---

### 2  命名规则（建议）

| 维度       | 规范                                                        | 说明 & 示例                                                     |
| -------- | --------------------------------------------------------- | ----------------------------------------------------------- |
| **阶段枚举** | `basic / intermediate / advanced`                         | 旧词 `beginner` 改成 **basic**，`free / project / hands-on` 等淘汰。 |
| **课程部分** | 使用 **course-slug**                                        | `photoshop`、`python`、`unreal`、`logo`…                       |
| **会员标记** | 可选 `membership` 片段插入课程名后                                  | `logo-membership-advanced-cover-1280.webp`                  |
| **尺寸后缀** | `-480 / -1280 / -1920`                                    | 与 `srcset` 中的 `w` 值对应。                                      |
| **文件扩展** | 首选 `.webp`，保留 `.png` 只作兼容                                 | 大部分浏览器已支持 WebP。                                             |
| **整体格式** | `<course-slug>(-membership)?-<stage>-cover-<width>.<ext>` | 例：`photoshop-basic-cover-1280.webp`                         |

---

### 3  批量重命名脚本（Node.js 示例）

```bash
# 1. 安装依赖
pnpm add -D rename-cli slugify
```

```js
// rename-images.js
import { readdir, rename } from 'node:fs/promises'
import path from 'node:path'
import slugify from 'slugify'

const STAGE_ALIASES = {
  beginner: 'basic',
  basic: 'basic',
  intermediate: 'intermediate',
  advanced: 'advanced'
}

const DIR = 'assets/images/courses'

const files = await readdir(DIR)

for (const file of files) {
  const m = file.match(
    /^(?<stage>[a-z-]+)-(?<course>[a-z-]+)-cover-(?<size>\\d+)\\.(?<ext>png|webp)$/i
  )
  if (!m) continue

  let { stage, course, size, ext } = m.groups
  stage = STAGE_ALIASES[stage] || stage      // 旧值映射
  if (!['basic', 'intermediate', 'advanced'].includes(stage)) {
    console.warn('✖ 跳过非法阶段', file)
    continue
  }

  course = slugify(course, { lower: true })  // 课程名统一 slug
  const newName = `${course}-${stage}-cover-${size}.${ext}`
  if (newName !== file) {
    await rename(
      path.join(DIR, file),
      path.join(DIR, newName)
    )
    console.log('✓', file, '→', newName)
  }
}
```

```bash
# 2. 执行
node rename-images.js
```

#### 脚本做了什么？

1. **解析旧文件名** → 抽取 `stage / course / size / ext`。
2. **阶段映射**：`beginner → basic`，抛弃 `free / project / hands-on / vip` 等。
3. **slugify 课程名**：强制转小写、连字符。
4. **重命名**：按新规则输出。非法阶段直接警告不改。

---

### 4  处理历史“杂项阶段”策略

| 旧前缀                 | 建议归类                 | 处理方式                                                             |
| ------------------- | -------------------- | ---------------------------------------------------------------- |
| `free-*`            | 根据课程深度 → `basic` 或删除 | 若真的是免费试听，可放到 **basic** 并在后台标记 `isFree`；否则移除。                     |
| `hands-on-*`        | 通常是项目实战 → `advanced` | 统一改为对应课程 `advanced`。                                             |
| `project-* / ps2-*` | 往往是系列课第二期            | 考虑合并到 `advanced` 并用 slug `photoshop-advanced`；多期可加 `-v2`。        |
| `vip-* / vip2-*`    | 会员专享                 | 课程名加 `membership` 片段：`logo-membership-advanced-cover-1280.webp`。 |

---

### 5  修改后务必同步的 3 处

1. **代码引用**

   * `CourseCard.vue` / `LessonRow.vue` 中的 `srcset` & `import` 路径。
2. **JSON-LD**

   * `image` 字段与 `contentUrl` 更新到新文件名。
3. **CDN 缓存**

   * 上传新图后执行 `PURGE`；旧文件可保留 30 天做 301，再清理。

---

### 6  自动验证脚本（加入 CI）

```bash
# check-image-names.sh
if grep -R --exclude-dir=node_modules -E '(beginner|free|project|hands-on|vip)[^-]*-cover-' assets/images/courses; then
  echo '❌ 发现未规范化的文件名'; exit 1;
fi
```

---

## In short（中文）

* **最好上线前一次性统一**：改成 `[课程slug]-[basic|intermediate|advanced]-cover-[宽度].[webp]`。
* 用脚本批量把 `beginner → basic`，淘汰 `free / project / hands-on / vip`，会员可插 `membership`。
* 改名后同步更新组件路径、JSON-LD 与 CDN 缓存，并在 CI 加脚本防回退。
