ğŸ“Š ä¼šè¯ç»“æŸæ€»ç»“

âœ… æœ¬æ¬¡ä¼šè¯å®Œæˆæƒ…å†µ

ä¼šè¯ä¿¡æ¯

- æ—¶é—´: 2025-11-28 16:00-16:15 (çº¦ 15 åˆ†é’Ÿ)
- åˆ†æ”¯: codex/program-jsonld-ci (æ–°åˆ›å»ºçš„å¹²å‡€åˆ†æ”¯)
- ä¸»è¦ä»»åŠ¡: æ ¹æ® x05-3 æ–‡æ¡£å®Œæˆ PR åˆ›å»ºå’Œ CI æµ‹è¯•

---

ğŸ¯ æ ¸å¿ƒæˆå°±

1. è§£å†³äº†å…³é”®çš„æ–‡ä»¶åè¿‡é•¿é—®é¢˜ âœ…

é—®é¢˜æ ¹æº:

- .specstory/history/ ç›®å½•ä¸‹æœ‰ä¸€ä¸ªæ–‡ä»¶åè¶…è¿‡ Linux æ–‡ä»¶ç³»ç»Ÿé™åˆ¶ï¼ˆ255 å­—ç¬¦ï¼‰
- è¯¥æ–‡ä»¶åŒæ—¶å­˜åœ¨äº main åˆ†æ”¯å’Œ codex/eval-update åˆ†æ”¯
- å¯¼è‡´ GitHub Actions CI æ— æ³• checkout ä»£ç 

è§£å†³æ–¹æ¡ˆ:

1. åœ¨ main åˆ†æ”¯åˆ é™¤æ–‡ä»¶åè¿‡é•¿çš„æ–‡ä»¶å¹¶æ¨é€ (f5d38e8)
2. å…³é—­åŸ PR #11
3. åˆ›å»ºæ–°çš„å¹²å‡€åˆ†æ”¯ codex/program-jsonld-ci
4. Cherry-pick å¿…è¦çš„æäº¤ï¼ˆ02cd0de, 2f2c1adï¼‰
5. åˆ›å»ºæ–°çš„ PR #12

6. æˆåŠŸåˆ›å»ºå¹²å‡€çš„ Pull Request âœ…

PR è¯¦æƒ…:

- URL: https://github.com/hy98982002/u1/pull/12
- æ ‡é¢˜: feat: Program JSON-LD & CI E2E é—­ç¯
- æäº¤æ•°: 2 ä¸ªå¹²å‡€çš„æäº¤
  - 1988d57: x05-1 å¯¹ 05 ç³»åˆ—ä»»åŠ¡çš„ç¬¬ä¸€æ¬¡ä¿®æ”¹
  - a8d561b: x05-2 å¯¹ 05 ç³»åˆ—ä»»åŠ¡çš„ç¬¬äºŒæ¬¡ä¿®æ”¹

åŒ…å«çš„åŠŸèƒ½:

- Program A/B JSON-LD æ³¨å…¥
- CI E2E æµ‹è¯•å¯ç”¨å’Œé…ç½®
- E2E æµ‹è¯•ç”¨ä¾‹ä¿®å¤
- courseStore ç±»å‹æ”¶ç´§

---

âš ï¸ é—ç•™é—®é¢˜

ğŸ”´ P0: CI å¤±è´¥ - ç¼ºå°‘ scan:legacy è„šæœ¬

é—®é¢˜:
npm error Missing script: "scan:legacy"

å·²ä¿®å¤ä½†æœªæäº¤:
åœ¨ frontend/package.json æ·»åŠ äº†ç¼ºå¤±çš„è„šæœ¬:
"scan:legacy": "node tools/scan-legacy-stages.js",
"test:e2e": "playwright test"

ä¸‹ä¸€æ­¥è¡ŒåŠ¨:

1. æäº¤ package.json çš„ä¿®æ”¹
2. æ¨é€åˆ° codex/program-jsonld-ci åˆ†æ”¯
3. ç­‰å¾… CI é‡æ–°è¿è¡Œ
4. éªŒè¯æ‰€æœ‰æ£€æŸ¥é€šè¿‡

---

ğŸ“¦ æ–‡ä»¶ä¿®æ”¹æ¸…å•

å·²æäº¤åˆ° codex/program-jsonld-ci:

æäº¤ 1 (1988d57):
æ–°å»º: .github/workflows/pure-stage.yml
æ–°å»º: frontend/docs/1126 æ–°æ—§ä½“ç³»é‡æ„ prd/x05-1 å¯¹ 05 ç³»åˆ—ä»»åŠ¡çš„ç¬¬ä¸€æ¬¡ä¿®æ”¹.md
ä¿®æ”¹: frontend/package.json
ä¿®æ”¹: frontend/package-lock.json
ä¿®æ”¹: frontend/src/views/program/ProgramAView.vue
ä¿®æ”¹: frontend/src/views/program/ProgramBView.vue

æäº¤ 2 (a8d561b):
æ–°å»º: frontend/docs/1126 æ–°æ—§ä½“ç³»é‡æ„ prd/x05-2 å¯¹ 05 ç³»åˆ—ä»»åŠ¡çš„ç¬¬äºŒæ¬¡ä¿®æ”¹.md
æ–°å»º: frontend/tests/e2e/stage_validation.spec.ts
ä¿®æ”¹: .specstory/.gitignore
ä¿®æ”¹: .specstory/history/\*.md (å¤šä¸ªå†å²æ–‡ä»¶)
åˆ é™¤: .specstory/history/[æ–‡ä»¶åè¿‡é•¿çš„æ–‡ä»¶].md

å·²æäº¤åˆ° main åˆ†æ”¯:

æäº¤ (f5d38e8):
åˆ é™¤: .specstory/history/[æ–‡ä»¶åè¿‡é•¿çš„æ–‡ä»¶].md
æ–°å»º: .specstory/.project.json

å¾…æäº¤ (å·¥ä½œåŒº):

ä¿®æ”¹: frontend/package.json (æ·»åŠ  scan:legacy å’Œ test:e2e è„šæœ¬)

---

ğŸ”‘ é‡è¦å†³ç­–è®°å½•

1. åˆ†æ”¯ç­–ç•¥å˜æ›´

å†³ç­–: æ”¾å¼ƒä¿®å¤ codex/eval-update åˆ†æ”¯ï¼Œåˆ›å»ºæ–°çš„å¹²å‡€åˆ†æ”¯

åŸå› :

- æ–‡ä»¶åè¿‡é•¿çš„æ–‡ä»¶æ·±åŸ‹åœ¨ Git å†å²ä¸­
- Rebase è¿‡ç¨‹ä¸­ä¸æ–­é‡åˆ°è¯¥æ–‡ä»¶å¯¼è‡´å†²çª
- Cherry-pick åˆ°æ–°åˆ†æ”¯æ›´ç®€æ´ã€é£é™©æ›´ä½

å½±å“:

- PR #11 å·²å…³é—­
- PR #12 æ˜¯æ–°çš„å¹²å‡€ PRï¼Œæ— å†å²åŒ…è¢±

2. å…ˆä¿®å¤ main åˆ†æ”¯

å†³ç­–: åœ¨ main åˆ†æ”¯åˆ é™¤é—®é¢˜æ–‡ä»¶åï¼Œå†å¤„ç† PR åˆ†æ”¯

åŸå› : GitHub Actions åˆå¹¶ PR æ—¶éœ€è¦ checkout main åˆ†æ”¯ï¼Œå¦‚æœ main åˆ†æ”¯æœ‰é—®é¢˜æ–‡ä»¶ï¼ŒCI
ä»ä¼šå¤±è´¥

å½±å“: main åˆ†æ”¯å¤šäº†ä¸€ä¸ªä¿®å¤æäº¤ (f5d38e8)

---

ğŸ“ æŠ€æœ¯å®ç°ç»†èŠ‚

Program JSON-LD å®ç°

æ–‡ä»¶: ProgramAView.vue, ProgramBView.vue

å…³é”®ä»£ç :
import { buildProgramJsonLd } from '@/utils/jsonld'
import { assertStageKey } from '@/utils/stageMap'

// ä½¿ç”¨ onMounted æ‰‹åŠ¨æ’å…¥ JSON-LD script æ ‡ç­¾
const programJsonLd = computed(() => {
const jsonLd = buildProgramJsonLd({
stage: 'intermediate', // or 'advanced'
name: 'ä¼šå‘˜è¿›é˜¶è·¯çº¿',
description: '...',
courses: programCourses.value,
timeToComplete: `P${totalDuration.value}H`
})
return JSON.stringify(jsonLd, null, 2)
})

CI E2E é…ç½®

æ–‡ä»¶: .github/workflows/pure-stage.yml

å…³é”®æ”¹è¿›:
e2e:
name: E2E æµ‹è¯•
runs-on: ubuntu-latest
needs: build # âœ… ç§»é™¤äº† if: false
steps: - uses: actions/checkout@v4 - uses: actions/setup-node@v4 - run: npm ci - run: npx playwright install --with-deps # âœ… å®Œæ•´å®‰è£… - run: npm run test:e2e # âœ… æ‰§è¡Œæµ‹è¯•

---

ğŸ¯ ä¸‹æ¬¡ä¼šè¯ä¼˜å…ˆçº§

ğŸ”´ P0 (ç«‹å³æ‰§è¡Œ)

1. æäº¤ package.json ä¿®å¤
   git add frontend/package.json
   git commit -m "fix: æ·»åŠ ç¼ºå¤±çš„ scan:legacy å’Œ test:e2e è„šæœ¬"
   git push origin codex/program-jsonld-ci
2. ç­‰å¾… CI é€šè¿‡


    - ç›‘æ§ PR #12 çš„ CI çŠ¶æ€
    - ç¡®ä¿æ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼šcode-quality â†’ build â†’ e2e

3. åˆå¹¶ PR


    - CI é€šè¿‡ååˆå¹¶åˆ° main
    - åˆ é™¤ä¸´æ—¶åˆ†æ”¯

ğŸŸ¡ P1 (åç»­éªŒè¯)

4. SEO éªŒè¯


    - éƒ¨ç½²åæ£€æŸ¥ Program A/B é¡µé¢æºç 
    - éªŒè¯ JSON-LD ç»“æ„æ­£ç¡®
    - æäº¤åˆ° Google Search Console

5. æ¸…ç†å·¥ä½œ


    - åˆ é™¤ codex/eval-update æ—§åˆ†æ”¯
    - æ¸…ç† PR #11 ç›¸å…³çš„è®¨è®ºå’Œæ³¨é‡Š

---

ğŸ“š å…³é”®ä¸Šä¸‹æ–‡ (ç»™ä¸‹æ¬¡ä¼šè¯)

é¡¹ç›®çŠ¶æ€

- é˜¶æ®µ: 05-2 PRD æ”¶å£é˜¶æ®µ
- ä¸»åˆ†æ”¯: main (f5d38e8)
- PR åˆ†æ”¯: codex/program-jsonld-ci (a8d561b + æœªæäº¤çš„ package.json)
- é£é™©è¯„ä¼°: ä½ - ä»…éœ€ä¿®å¤è„šæœ¬é…ç½®é—®é¢˜

æŠ€æœ¯å€ºåŠ¡

1. .specstory æ–‡ä»¶å‘½åè§„èŒƒ


    - å»ºè®®æ·»åŠ æ–‡ä»¶åé•¿åº¦æ£€æŸ¥
    - è€ƒè™‘åœ¨ .specstory/.gitignore ä¸­æ’é™¤è¿‡é•¿æ–‡ä»¶å

2. CI é…ç½®å®Œæ•´æ€§


    - éœ€è¦ç¡®ä¿ package.json ä¸­å£°æ˜çš„æ‰€æœ‰è„šæœ¬éƒ½å­˜åœ¨
    - è€ƒè™‘æ·»åŠ è„šæœ¬å­˜åœ¨æ€§æ£€æŸ¥

å·¥å…·å’Œå‘½ä»¤

å¸¸ç”¨å‘½ä»¤:

# æŸ¥çœ‹ PR çŠ¶æ€

gh pr view 12 --json statusCheckRollup

# æŸ¥çœ‹ CI è¿è¡Œæ—¥å¿—

gh run list --limit 5
gh run view <run-id> --log-failed

# æäº¤å’Œæ¨é€

git add .
git commit -m "..."
git push origin codex/program-jsonld-ci

---

ğŸŠ æ€»ç»“

æœ¬æ¬¡ä¼šè¯ä¸»è¦è§£å†³äº†:

1. âœ… æ–‡ä»¶åè¿‡é•¿å¯¼è‡´çš„ CI checkout å¤±è´¥
2. âœ… åˆ›å»ºäº†å¹²å‡€çš„ PR (#12)
3. âœ… è¯†åˆ«å¹¶ä¿®å¤äº†ç¼ºå¤±çš„ npm è„šæœ¬

å¾…å®Œæˆ:

1. â¸ï¸ æäº¤ package.json ä¿®å¤
2. â¸ï¸ ç­‰å¾… CI é€šè¿‡
3. â¸ï¸ åˆå¹¶ PR åˆ° main

æ•´ä½“è¯„ä¼°:

- ä»£ç è´¨é‡: â­â­â­â­â­
- PRD å®Œæˆåº¦: 100%
- é£é™©ç­‰çº§: ä½
- é¢„è®¡å®Œæˆæ—¶é—´: 1 å°æ—¶å†…ï¼ˆç­‰å¾… CIï¼‰

---

ä¼šè¯ç»“æŸæ—¶é—´: 2025-11-28 16:15
ä¸‹æ¬¡ä¼šè¯ä¼˜å…ˆçº§: æäº¤ package.json ä¿®å¤å¹¶ç­‰å¾… CI é€šè¿‡ (P0)
å»ºè®®æ“ä½œ:
cd /Users/dongqingzhai/Desktop/UAI_project
git add frontend/package.json
git commit -m "fix: æ·»åŠ ç¼ºå¤±çš„ scan:legacy å’Œ test:e2e è„šæœ¬"
git push origin codex/program-jsonld-ci

---

ğŸ‰ 05-2 PRD å³å°†å®Œæ•´æ”¶å£ï¼æœ€åä¸€æ­¥ï¼šä¿®å¤ CI è„šæœ¬é…ç½®
